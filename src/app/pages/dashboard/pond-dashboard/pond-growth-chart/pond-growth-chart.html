<div class="chart-card">
  <div class="chart-header">
    <div class="flex items-center gap-2">
      <lucide-icon [img]="TrendingUp" [size]="20" class="text-purple-400"></lucide-icon>
      <h3 class="chart-title">Curva de Crecimiento</h3>
    </div>
    @if (!isEmpty()) {
      <span class="chart-subtitle">{{ data.length }} biometrías registradas</span>
    }
  </div>

  @if (isEmpty()) {
    <div class="empty-state">
      <lucide-icon [img]="TrendingUp" [size]="48" class="text-slate-600"></lucide-icon>
      <p class="empty-text">No hay datos de biometrías aún</p>
      <p class="empty-subtext">Los datos aparecerán cuando se registren biometrías</p>
    </div>
  } @else {
    <div class="chart-content">
      <div class="chart-bars">
        @for (point of data; track point.semana) {
          <div class="bar-group">
            <div class="bar-container">
              <div
                class="bar"
                [style.height]="getBarHeight(point.pp_g)"
                [title]="point.pp_g.toFixed(2) + ' g'"
              >
                <span class="bar-value">{{ point.pp_g.toFixed(1) }}</span>
              </div>
            </div>
            <span class="bar-label">S{{ point.semana }}</span>
            <span class="bar-date">{{ formatDate(point.fecha) }}</span>
          </div>
        }
      </div>
    </div>
  }
</div>
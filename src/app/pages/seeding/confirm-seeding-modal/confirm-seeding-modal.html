<div class="modal-overlay" (click)="onClose()">
  <div class="modal-content modal-small" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="modal-header">
      <div class="header-icon success">
        <lucide-icon [img]="CheckCircle" [size]="24"></lucide-icon>
      </div>
      <div class="header-text">
        <h2 class="modal-title">Confirmar Siembra</h2>
        <p class="modal-subtitle">Esta acción marcará la siembra como finalizada</p>
      </div>
      <button class="close-button" (click)="onClose()">
        <lucide-icon [img]="X" [size]="20"></lucide-icon>
      </button>
    </div>

    <!-- Body -->
    <div class="modal-body">
      <!-- Error Message -->
      @if (error()) {
        <div class="error-banner">
          <lucide-icon [img]="AlertCircle" [size]="20"></lucide-icon>
          <span>{{ error() }}</span>
        </div>
      }

      <!-- Warning Info -->
      <div class="warning-box">
        <div class="warning-icon">
          <lucide-icon [img]="AlertCircle" [size]="24"></lucide-icon>
        </div>
        <div class="warning-content">
          <h3 class="warning-title">¿Estás seguro?</h3>
          <p class="warning-text">
            Al confirmar esta siembra:
          </p>
          <ul class="warning-list">
            <li>Se registrará la fecha de siembra como <strong>{{ currentDate }}</strong></li>
            <li>El estanque pasará a estado <strong>activo</strong></li>
            <li>Si es la última siembra, se activará el reforecast automático</li>
            <li>Esta acción <strong>no se puede deshacer</strong></li>
          </ul>
        </div>
      </div>

      <!-- Actions -->
      <div class="modal-actions">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="onClose()"
          [disabled]="loading()"
        >
          Cancelar
        </button>

        <button
          type="button"
          class="btn btn-success"
          (click)="onConfirm()"
          [disabled]="loading()"
        >
          @if (loading()) {
            <span>Confirmando...</span>
          } @else {
            <lucide-icon [img]="CheckCircle" [size]="16"></lucide-icon>
            <span>Sí, Confirmar Siembra</span>
          }
        </button>
      </div>
    </div>
  </div>
</div>
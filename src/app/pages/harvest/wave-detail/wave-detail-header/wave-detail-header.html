<div class="wave-detail-header">
  <!-- Card 1: Info de la Ola -->
  <div class="wave-info-card">
    <div class="card-header">
      <div class="header-left">
        <h1 class="wave-name">{{ wave.nombre }}</h1>
        <div class="badges">
          <span class="badge" [ngClass]="typeBadgeClass">
            {{ typeLabel }}
          </span>
          <span class="badge" [ngClass]="statusBadgeClass">
            {{ statusLabel }}
          </span>
        </div>
      </div>

      @if (canCancel) {
        <div class="header-right">
          <button class="btn-cancel-wave" (click)="onCancelClick()">
            <lucide-icon [img]="XCircle" [size]="18"></lucide-icon>
            <span>Cancelar Ola</span>
          </button>
        </div>
      }
    </div>

    <div class="card-body">
      <div class="info-row">
        <lucide-icon [img]="Calendar" [size]="18" class="info-icon"></lucide-icon>
        <div class="info-content">
          <span class="info-label">Ventana de cosecha:</span>
          <span class="info-value">{{ dateRange }}</span>
        </div>
      </div>

      @if (wave.objetivo_retiro_org_m2) {
        <div class="info-row">
          <lucide-icon [img]="Package" [size]="18" class="info-icon"></lucide-icon>
          <div class="info-content">
            <span class="info-label">Objetivo de retiro:</span>
            <span class="info-value">{{ wave.objetivo_retiro_org_m2 }} org/m²</span>
          </div>
        </div>
      }

      @if (wave.notas) {
        <div class="notes-section">
          <p class="notes-label">Notas:</p>
          <p class="notes-text">{{ wave.notas }}</p>
        </div>
      }
    </div>
  </div>

  <!-- Card 2: Progreso -->
  <div class="progress-card">
    <div class="card-icon">
      <lucide-icon [img]="CheckCircle" [size]="24"></lucide-icon>
    </div>

    <div class="progress-content">
      <h3 class="progress-title">Progreso de Cosecha</h3>

      <div class="progress-stats">
        <div class="stat-main">
          <span class="stat-value">{{ stats.confirmed }}</span>
          <span class="stat-separator">/</span>
          <span class="stat-total">{{ stats.total }}</span>
        </div>
        <span class="stat-label">Líneas confirmadas</span>
      </div>

      <div class="progress-bar-container">
        <div class="progress-bar">
          <div 
            class="progress-fill" 
            [style.width.%]="completionPercentage"
          ></div>
        </div>
        <span class="progress-percentage">{{ completionPercentage }}%</span>
      </div>
    </div>
  </div>

  <!-- Card 3: Estadísticas -->
  <div class="stats-card">
    <div class="card-icon stats-icon">
      <lucide-icon [img]="Clock" [size]="24"></lucide-icon>
    </div>

    <div class="stats-content">
      <h3 class="stats-title">Estado de Líneas</h3>

      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value text-yellow-400">{{ stats.pending }}</div>
          <div class="stat-label">Pendientes</div>
        </div>

        <div class="stat-item">
          <div class="stat-value text-green-400">{{ stats.confirmed }}</div>
          <div class="stat-label">Confirmadas</div>
        </div>

        <div class="stat-item">
          <div class="stat-value text-red-400">{{ stats.cancelled }}</div>
          <div class="stat-label">Canceladas</div>
        </div>
      </div>
    </div>
  </div>
</div>
@use '../../../../theme/variables';

:host {
  @apply block;
}

.task-card {
  @apply bg-slate-800 rounded-xl border border-slate-700 p-5 transition-colors;
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);

  &:hover {
    @apply border-slate-600;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  }
}

// Header
.card-header {
  @apply flex items-start justify-between mb-4;

  .header-left {
    @apply flex-1;

    .task-title {
      @apply text-lg font-semibold text-white m-0 mb-2;
    }

    .badges {
      @apply flex items-center gap-2 flex-wrap;

      .badge {
        @apply inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium;

        // Priority badges
        &.priority-high {
          @apply bg-red-500 bg-opacity-20 text-red-400 border border-red-500;
        }

        &.priority-medium {
          @apply bg-yellow-500 bg-opacity-20 text-yellow-400 border border-yellow-500;
        }

        &.priority-low {
          @apply bg-blue-500 bg-opacity-20 text-blue-400 border border-blue-500;
        }

        // Status badges
        &.status-pending {
          @apply bg-slate-500 bg-opacity-20 text-slate-300 border border-slate-500;
        }

        &.status-progress {
          @apply bg-blue-500 bg-opacity-20 text-blue-400 border border-blue-500;
        }

        &.status-completed {
          @apply bg-green-500 bg-opacity-20 text-green-400 border border-green-500;
        }

        &.status-cancelled {
          @apply bg-red-500 bg-opacity-20 text-red-400 border border-red-500;
        }

        &.badge-type {
          @apply bg-purple-500 bg-opacity-20 text-purple-400 border border-purple-500;
        }
      }
    }
  }

  .header-right {
    .days-badge {
      @apply inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium;
      
      &.days-badge-overdue {
        @apply bg-red-500 bg-opacity-20 text-red-400 border border-red-500;
      }
      
      &.days-badge-today {
        @apply bg-orange-500 bg-opacity-20 text-orange-400 border border-orange-500;
      }
      
      &.days-badge-soon {
        @apply bg-yellow-500 bg-opacity-20 text-yellow-400 border border-yellow-500;
      }
      
      &.days-badge-default {
        @apply bg-slate-700 text-slate-400 border border-slate-600;
      }
    }
  }
}

// Summary
.card-summary {
  @apply space-y-2 mb-4;

  .summary-item {
    @apply flex items-center gap-2 text-sm text-slate-300;

    .summary-icon {
      @apply text-slate-400 flex-shrink-0;
    }

    .summary-text {
      @apply flex-1;
    }
  }
}

// Progress inline (más compacto)
.progress-inline {
  @apply flex items-center gap-2 w-full;

  .progress-bar-inline {
    @apply flex-1 h-2 bg-slate-700 rounded-full overflow-hidden;

    .progress-fill-inline {
      @apply h-full bg-blue-500 transition-all duration-300;
    }
  }

  .progress-text-inline {
    @apply text-xs font-semibold text-slate-300 min-w-[3rem] text-right;
  }
}

// Actions
.card-actions {
  @apply flex gap-2 pt-4 border-t border-slate-700;

  .expand-btn {
    @apply ml-auto;
  }
}

// Details (Expandible)
.card-details {
  @apply mt-4 pt-4 border-t border-slate-700;
}

// Loading detail state
.loading-detail {
  @apply flex flex-col items-center justify-center py-8;

  .spinner {
    @apply w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mb-2;
  }

  p {
    @apply text-sm text-slate-400 m-0;
  }
}

// Details section (para descripción)
.detail-section {
  @apply mb-4 pb-4 border-b border-slate-700;

  &:last-of-type {
    @apply border-b-0 pb-0;
  }

  .detail-section-title {
    @apply text-sm font-semibold text-slate-300 mb-2 m-0;
  }

  .detail-description {
    @apply text-sm text-slate-400 m-0 whitespace-pre-wrap;
  }
}

// Progress Control Section
.progress-control {
  @apply space-y-3;

  .progress-header {
    @apply flex items-center justify-between;

    .detail-section-title {
      @apply mb-0;
    }

    .progress-value {
      @apply text-lg font-bold text-blue-400;
    }
  }

  .progress-slider {
    @apply w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer;

    &::-webkit-slider-thumb {
      @apply appearance-none w-4 h-4 bg-blue-500 rounded-full cursor-pointer;
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
    }

    &::-moz-range-thumb {
      @apply w-4 h-4 bg-blue-500 rounded-full cursor-pointer border-0;
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
    }

    &::-webkit-slider-runnable-track {
      @apply w-full h-2 bg-slate-700 rounded-lg;
    }

    &::-moz-range-track {
      @apply w-full h-2 bg-slate-700 rounded-lg;
    }

    &:disabled {
      @apply opacity-50 cursor-not-allowed;
    }
  }

  .progress-actions {
    @apply flex gap-2;

    .btn-progress-quick {
      @apply flex-1 px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white rounded-lg text-sm font-medium transition-colors;

      &:disabled {
        @apply opacity-50 cursor-not-allowed;
      }

      &:hover:not(:disabled) {
        @apply bg-blue-500 text-white;
      }
    }
  }

  .progress-saving {
    @apply text-xs text-blue-400 text-center m-0 animate-pulse;
  }
}

// Details grid
.details-grid {
  @apply grid grid-cols-1 md:grid-cols-2 gap-3 mb-4;

  .detail-item {
    @apply flex flex-col gap-1;

    .detail-label {
      @apply text-xs text-slate-400;
    }

    .detail-value {
      @apply text-sm font-medium text-white;
    }
  }
}

// Recurrent badge
.recurrent-badge {
  @apply inline-flex items-center gap-1 px-2 py-1 bg-purple-500 bg-opacity-20 text-purple-400 border border-purple-500 rounded text-xs font-medium;
}

// Details actions
.details-actions {
  @apply flex gap-2 pt-3 border-t border-slate-700;
}

// Button Variants
.btn-sm {
  @apply text-sm px-3 py-2;
}

.btn-success {
  @apply bg-green-500 text-white;

  &:hover:not(:disabled) {
    @apply bg-green-600;
  }
}

.btn-danger {
  @apply bg-red-500 text-white;

  &:hover:not(:disabled) {
    @apply bg-red-600;
  }
}

.btn-ghost {
  @apply bg-transparent text-slate-300 hover:bg-slate-700;
}

// Responsive
@media (max-width: 768px) {
  .card-header {
    @apply flex-col gap-2;

    .header-right {
      @apply w-full flex justify-end;
    }
  }

  .details-grid {
    @apply grid-cols-1;
  }

  .card-actions,
  .details-actions {
    @apply flex-wrap;

    button {
      @apply flex-1;
    }
  }

  .progress-control {
    .progress-actions {
      @apply grid grid-cols-2;
    }
  }
}